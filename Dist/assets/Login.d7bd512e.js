import{r as F,L as S,s as x,C as k,S as A,R as E}from"./vue.runtime.esm-bundler.0c81efa8.js";import{_ as w,r as o,o as C,e as y,d as a,w as n,b as h,h as B,bw as m,t as v,F as L,p as R,a as T}from"./index.99b4b42d.js";import{H as D}from"./Header.54ce275a.js";var V={};Object.defineProperty(V,"__esModule",{value:!0});const f=F,z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},M=(0,f.createElementVNode)("path",{d:"M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.41z",fill:"currentColor"},null,-1),U=[M];var I=V.default=(0,f.defineComponent)({name:"KeyboardArrowRightSharp",render:function(e,c){return(0,f.openBlock)(),(0,f.createElementBlock)("svg",z,U)}});const j={data(){return{name:"",pass:"",loading:!1}},methods:{async loginAction(){this.loading=!0;const s=await S(this.name,this.pass);s.data.code!==200?this.$message.error(s.data.message):(this.$message.success(s.data.message),x.json("token",s.data.data),location.href="/user"),this.loading=!1}},components:{KeyboardArrowRightSharp:I}},q={class:"login-part"},K={class:"action"};function N(s,e,c,b,t,u){const r=o("n-input"),i=o("n-form-item-row"),d=o("n-form"),p=o("n-button"),l=o("KeyboardArrowRightSharp"),g=o("n-icon");return C(),y("div",q,[a(d,null,{default:n(()=>[a(i,{label:"\u7528\u6237\u540D"},{default:n(()=>[a(r,{size:"large",value:t.name,"onUpdate:value":e[0]||(e[0]=_=>t.name=_),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["value"])]),_:1}),a(i,{label:"\u5BC6\u7801"},{default:n(()=>[a(r,{type:"password",size:"large",value:t.pass,"onUpdate:value":e[1]||(e[1]=_=>t.pass=_),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["value"])]),_:1})]),_:1}),h("div",K,[a(p,{size:"large",quaternary:"",type:"info"},{default:n(()=>[B("\u5FD8\u8BB0\u5BC6\u7801\uFF1F")]),_:1}),a(p,{loading:t.loading,onClick:e[2]||(e[2]=_=>u.loginAction()),type:"primary",size:"large",circle:""},{icon:n(()=>[a(g,null,{default:n(()=>[a(l)]),_:1})]),_:1},8,["loading"])])])}const H=w(j,[["render",N],["__scopeId","data-v-8cec861f"]]),$={data(){return{nameLoading:!1,nameStatus:"",nametip:"",mail:"",password:"",registerButton:!0,registerButtonText:"\u8BF7\u586B\u5199\u4E0A\u9762\u7684\u6240\u6709\u9009\u9879",sendMailButtonText:"\u53D1\u9001\u9A8C\u8BC1\u7801",sendMailButton:!1,passwordStatus:"",allValue:{username:"",email:"",code:"",password:"",passwordRetry:""}}},methods:{async change(){this.nameLoading=!0;const s=await k(this.allValue.username);if(console.log(s),this.nameLoading=!1,this.nametip=s.data.message,s.data.code==200){if(m(this.allValue.email)){this.registerButtonText="\u8BF7\u586B\u5199\u90AE\u7BB1",this.registerButton=!0;return}if(m(this.allValue.code)){this.registerButtonText="\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",this.registerButton=!0;return}if(this.passwordChecker())this.registerButtonText="\u6CE8\u518C";else{this.registerButtonText="\u8BF7\u786E\u4FDD\u5BC6\u7801\u6B63\u786E";return}this.registerButton=!1,this.registerButtonText="\u6CE8\u518C",this.nameStatus=""}else this.nameStatus="error",this.registerButton=!0,this.$message.error(s.data.message),this.registerButtonText=s.data.message},passwordChecker(){return this.allValue.password!==this.allValue.passwordRetry||m(this.allValue.password)?!1:!m(this.allValue.passwordRetry)},async send(){this.sendMailButtonText="\u6B63\u5728\u53D1\u9001";const s=await A(this.allValue.email);s.data.code===200?this.$message.success(s.data.message):this.$message.error(s.data.message);let e=60;const c=setInterval(()=>{this.sendMailButtonText=`${e}s`,e==0?(this.sendMailButton=!1,this.sendMailButtonText="\u91CD\u65B0\u53D1\u9001",clearInterval(c)):(this.sendMailButton=!0,e--)},1e3)},async action(){let s=await E({username:this.allValue.username,password:this.allValue.password,email:this.allValue.email,code:this.allValue.code});this.$message.warning(s.data.message),s.data.code==200&&(x.json("token",s.data.token),this.$router.push("/user"))}}};function O(s,e,c,b,t,u){const r=o("n-input"),i=o("n-form-item-row"),d=o("n-button"),p=o("n-form");return C(),y(L,null,[a(p,{id:"register"},{default:n(()=>[a(i,{label:"\u7528\u6237\u540D"},{default:n(()=>[a(r,{loading:t.nameLoading,value:t.allValue.username,"onUpdate:value":e[0]||(e[0]=l=>t.allValue.username=l),status:t.nameStatus,onChange:u.change,placeholder:"\u4E2D\u6587\u53EF\u7528\uFF0Cemoji\u4E0D\u53EF\u7528",size:"large"},null,8,["loading","value","status","onChange"])]),_:1}),a(i,{label:"\u90AE\u7BB1"},{default:n(()=>[a(r,{value:t.allValue.email,"onUpdate:value":e[1]||(e[1]=l=>t.allValue.email=l),onChange:u.change,size:"large",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["value","onChange"])]),_:1}),a(i,{label:"\u9A8C\u8BC1\u7801"},{default:n(()=>[a(r,{onChange:u.change,size:"large",class:"code-input",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801",maxlength:6,value:t.allValue.code,"onUpdate:value":e[3]||(e[3]=l=>t.allValue.code=l)},{suffix:n(()=>[a(d,{onClick:e[2]||(e[2]=l=>u.send()),quaternary:"",disabled:t.sendMailButton},{default:n(()=>[B(v(t.sendMailButtonText),1)]),_:1},8,["disabled"])]),_:1},8,["onChange","value"])]),_:1}),a(i,{label:"\u5BC6\u7801"},{default:n(()=>[a(r,{value:t.allValue.password,"onUpdate:value":e[4]||(e[4]=l=>t.allValue.password=l),onChange:e[5]||(e[5]=l=>u.change()),size:"large",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password"},null,8,["value"])]),_:1}),a(i,{label:"\u91CD\u590D\u5BC6\u7801"},{default:n(()=>[a(r,{value:t.allValue.passwordRetry,"onUpdate:value":e[6]||(e[6]=l=>t.allValue.passwordRetry=l),onChange:e[7]||(e[7]=l=>u.change()),size:"large",placeholder:"\u8BF7\u91CD\u65B0\u8F93\u5165\u5BC6\u7801",status:t.passwordStatus,type:"password"},null,8,["value","status"])]),_:1})]),_:1}),a(d,{size:"large",onClick:e[8]||(e[8]=l=>u.action()),disabled:t.registerButton,status:t.passwordStatus,type:"primary",block:""},{default:n(()=>[B(v(t.registerButtonText),1)]),_:1},8,["disabled","status"])],64)}const P=w($,[["render",O]]),G="/assets/logo.226542b1.png";const J={data(){return{value:"signin",title:"\u767B\u5F55"}},methods:{changeTitle(s){s==="signin"?this.title="\u6CE8\u518C":this.title="\u767B\u5F55"}},components:{Login:H,Header:D,Register:P}},Q=s=>(R("data-v-da9fdf6c"),s=s(),T(),s),W={class:"login"},X=Q(()=>h("div",{class:"logo"},[h("img",{src:G})],-1)),Y={class:"container"};function Z(s,e,c,b,t,u){const r=o("Header"),i=o("Login",!0),d=o("n-tab-pane"),p=o("Register"),l=o("n-tabs");return C(),y("div",W,[a(r,null,{default:n(()=>[B(v(t.title),1)]),_:1}),X,h("div",Y,[a(l,{"justify-content":"space-evenly","default-value":"signin","onUpdate:value":[e[0]||(e[0]=g=>u.changeTitle(t.value)),e[1]||(e[1]=g=>t.value=g)],size:"large",value:t.value,animated:""},{default:n(()=>[a(d,{name:"signin",tab:"\u767B\u5F55",class:"log"},{default:n(()=>[a(i)]),_:1}),a(d,{name:"signup",tab:"\u6CE8\u518C"},{default:n(()=>[a(p)]),_:1})]),_:1},8,["value"])])])}const ae=w(J,[["render",Z],["__scopeId","data-v-da9fdf6c"]]);export{ae as default};
